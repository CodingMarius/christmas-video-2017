{% extends "base.html" %}
{% block body_class %}template-video{% endblock %}
{% block title %}{{ message }}{% endblock %}
{% block content %}
  <section class="section">
    <div class="container is-fluid">
      <div class="video-cracker">
        <div class="video-cracker-confetti">
          <svg>
            <use xlink:href="{{ url_for('static', filename='images/sprites.svg') }}#video-confetti" viewBox="0 0 1179.19 736.88"></use>
          </svg>
        </div>
        <div class="video-cracker-left">
          <svg>
            <use xlink:href="{{ url_for('static', filename='images/sprites.svg') }}#video-cracker-left" viewBox="0 0 602.53 379.5"></use>
          </svg>
        </div>
        <div class="video-cracker-picture">
          <video src="{{ video_url }}" controls preload="auto">
            <a href="{{ video_url }}">Click here to watch the video.</a>
          </video>
        </div>
        <div class="video-cracker-right">
          <svg>
            <use xlink:href="{{ url_for('static', filename='images/sprites.svg') }}#video-cracker-right" viewBox="0 0 635.74 339.82"></use>
          </svg>
        </div>
      </div>
    </section>
  </div>
  <section class="section section-next-to-logo">
    <div class="container">
      <p><a class="button is-primary is-large" href="{{ url_for('index') }}">Make another one</a></p>
      <br>
      <h2 class="title is-2">Share</h2>
      <div class="field">
        <label class="label">Share to social media</label>
        <div class="js-socials-container"></div>
      </div>
      <div class="field">
        <label class="label">Share URL</label>
        <div class="control">
          <input class="input" readonly type="text" value="{{ share_url|default(request.base_url) }}">
        </div>
      </div>
    </div>
  </section>
{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials-theme-flat.css">
{% endblock %}
{% block extra_js %}
  <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      window.shareURL = '{{ share_url|default(request.base_url) }}';
      var video = document.querySelector('video');
      video.addEventListener('play', function() {
        document.body.classList.add('video-loaded');
      });
      // Auto-play after 1.5 seconds (ensures things loaded) if user
      // has not played it themselves.
      setTimeout(function() {
        if (video.paused) {
          video.play();
        }
      }, 1500);
    })
  </script>
{% endblock %}
